<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="API documentation for the Rust `State` trait in crate `c19`."><meta name="keywords" content="rust, rustlang, rust-lang, State"><title>c19::state::State - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings"></script><script src="../../storage.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../../favicon.svg">
<link rel="alternate icon" type="image/png" href="../../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc trait"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu">&#9776;</div><a href='../../c19/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><p class="location">Trait State</p><div class="sidebar-elems"><div class="block items"><a class="sidebar-title" href="#required-methods">Required Methods</a><div class="sidebar-links"><a href="#tymethod.diff">diff</a><a href="#tymethod.get">get</a><a href="#tymethod.get_root">get_root</a><a href="#tymethod.init">init</a><a href="#tymethod.set">set</a><a href="#tymethod.version">version</a></div><a class="sidebar-title" href="#provided-methods">Provided Methods</a><div class="sidebar-links"><a href="#method.get_or">get_or</a></div><a class="sidebar-title" href="#trait-implementations">Trait Implementations</a><div class="sidebar-links"><a href="#impl-Serialize">Serialize</a><a href="#impl-Strictest">Strictest</a></div><a class="sidebar-title" href="#implementors">Implementors</a></div><p class="location"><a href="../index.html">c19</a>::<wbr><a href="index.html">state</a></p><script>window.sidebarCurrent = {name: "State", ty: "trait", relpath: ""};</script><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../../brush.svg" width="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../../settings.html"><img src="../../wheel.svg" width="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/c19/state.rs.html#61-103" title="goto source code">[src]</a></span><span class="in-band">Trait <a href="../index.html">c19</a>::<wbr><a href="index.html">state</a>::<wbr><a class="trait" href="">State</a></span></h1><div class="docblock type-decl hidden-by-usual-hider"><pre class="rust trait">pub trait State: <a class="trait" href="https://doc.rust-lang.org/nightly/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + <a class="trait" href="../../c19/state/trait.CloneState.html" title="trait c19::state::CloneState">CloneState</a> + Serialize + Deserialize {
    pub fn <a href="#tymethod.init" class="fnname">init</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a>&gt;;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.version" class="fnname">version</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a>;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.set" class="fnname">set</a>(&amp;self, value: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.get" class="fnname">get</a>(&amp;self, key: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.diff" class="fnname">diff</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;;
<div class="item-spacer"></div>    pub fn <a href="#tymethod.get_root" class="fnname">get_root</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;;

    pub fn <a href="#method.get_or" class="fnname">get_or</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt; { ... }
}</pre></div><div class="docblock"><p>The State trait.</p>
<p>Every state implementor must implement this trait. It is first auto-loaded by the configuration
deserializer and then initialized by the library by calling the <code>init</code> function. The <code>init</code>
function should return a <a href="../../c19/state/type.SafeState.html" title="SafeState">SafeState</a> which is then passed to the connection and agent layers.</p>
</div><h2 id="required-methods" class="small-section-header">Required methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><h3 id="tymethod.init" class="method"><code>pub fn <a href="#tymethod.init" class="fnname">init</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a>&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#67" title="goto source code">[src]</a></h3><div class="docblock"><p>Initializes the state and returns a state that is safe to be shared across threads.</p>
<p>A state object is already loaded by the configuration. The implementor can use this
function to add or initialize any other relevant data and then return a SafeState object
which is shared with the connection and agent layers.</p>
</div><h3 id="tymethod.version" class="method"><code>pub fn <a href="#tymethod.version" class="fnname">version</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a></code><a class="srclink" href="../../src/c19/state.rs.html#75" title="goto source code">[src]</a></h3><div class="docblock"><p>Returns the version of the current state.</p>
<p>An implementor can use this function to keep a version for each &quot;state&quot; of the sate. For
example, the default state implementation sets this value to 
a random string whenever the state changes. It is then saves that version in a version history which 
allows for the connection layer to compute diff between two versions. </p>
</div><h3 id="tymethod.set" class="method"><code>pub fn <a href="#tymethod.set" class="fnname">set</a>(&amp;self, value: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#82" title="goto source code">[src]</a></h3><div class="docblock"><p>Sets a value to the state.</p>
<p>There's no assumption about the value itself. It can be anything the implementor wishes.
The default state implementation, for example, treats this value as a map of key/value
pairs where the key is a String and the value conforms to a serde_json::Value value.</p>
</div><h3 id="tymethod.get" class="method"><code>pub fn <a href="#tymethod.get" class="fnname">get</a>(&amp;self, key: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#88" title="goto source code">[src]</a></h3><div class="docblock"><p>Gets the value associated with the specified key.</p>
<p>To allow maximum flexibility, the key itself is a StateValue, which in effect means it can
be anything desired by the implementor.</p>
</div><h3 id="tymethod.diff" class="method"><code>pub fn <a href="#tymethod.diff" class="fnname">diff</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;other: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#97" title="goto source code">[src]</a></h3><div class="docblock"><p>Returns the difference between this and the <code>other</code> state.</p>
</div><h3 id="tymethod.get_root" class="method"><code>pub fn <a href="#tymethod.get_root" class="fnname">get_root</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#102" title="goto source code">[src]</a></h3><div class="docblock"><p>Returns the whole state as a StateValue.</p>
<p>This is helpful when the connection layer wishes to publish the whole state to its peers.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="provided-methods" class="small-section-header">Provided methods<a href="#provided-methods" class="anchor"></a></h2><div class="methods"><h3 id="method.get_or" class="method"><code>pub fn <a href="#method.get_or" class="fnname">get_or</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;key: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>, <br>&nbsp;&nbsp;&nbsp;&nbsp;default: <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;<br>) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;</code><a class="srclink" href="../../src/c19/state.rs.html#92-94" title="goto source code">[src]</a></h3><div class="docblock"><p>Returns the value associated with the specified key or the default if the key was not found 
in the state.</p>
</div></div><span class="loading-content">Loading content...</span><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><h3 id="impl-Serialize" class="impl"><code class="in-band">impl&lt;'typetag&gt; <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> for dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a> + 'typetag</code><a href="#impl-Serialize" class="anchor"></a><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.serialize" class="method hidden"><code>pub fn <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize" class="fnname">serialize</a>&lt;S&gt;(&amp;self, serializer: S) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Ok" title="type serde::ser::Serializer::Ok">Ok</a>, S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Error" title="type serde::ser::Serializer::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html" title="trait serde::ser::Serializer">Serializer</a>,&nbsp;</span></code><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Serialize this value into the given Serde serializer. <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize">Read more</a></p>
</div></div><h3 id="impl-Serialize-1" class="impl"><code class="in-band">impl&lt;'typetag&gt; <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> for dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'typetag</code><a href="#impl-Serialize-1" class="anchor"></a><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.serialize-1" class="method hidden"><code>pub fn <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize" class="fnname">serialize</a>&lt;S&gt;(&amp;self, serializer: S) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Ok" title="type serde::ser::Serializer::Ok">Ok</a>, S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Error" title="type serde::ser::Serializer::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html" title="trait serde::ser::Serializer">Serializer</a>,&nbsp;</span></code><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Serialize this value into the given Serde serializer. <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize">Read more</a></p>
</div></div><h3 id="impl-Serialize-2" class="impl"><code class="in-band">impl&lt;'typetag&gt; <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> for dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'typetag</code><a href="#impl-Serialize-2" class="anchor"></a><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.serialize-2" class="method hidden"><code>pub fn <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize" class="fnname">serialize</a>&lt;S&gt;(&amp;self, serializer: S) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Ok" title="type serde::ser::Serializer::Ok">Ok</a>, S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Error" title="type serde::ser::Serializer::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html" title="trait serde::ser::Serializer">Serializer</a>,&nbsp;</span></code><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Serialize this value into the given Serde serializer. <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize">Read more</a></p>
</div></div><h3 id="impl-Serialize-3" class="impl"><code class="in-band">impl&lt;'typetag&gt; <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html" title="trait serde::ser::Serialize">Serialize</a> for dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'typetag</code><a href="#impl-Serialize-3" class="anchor"></a><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.serialize-3" class="method hidden"><code>pub fn <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize" class="fnname">serialize</a>&lt;S&gt;(&amp;self, serializer: S) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Ok" title="type serde::ser::Serializer::Ok">Ok</a>, S::<a class="type" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html#associatedtype.Error" title="type serde::ser::Serializer::Error">Error</a>&gt; <span class="where fmt-newline">where<br>&nbsp;&nbsp;&nbsp;&nbsp;S: <a class="trait" href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serializer.html" title="trait serde::ser::Serializer">Serializer</a>,&nbsp;</span></code><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h4><div class='docblock hidden'><p>Serialize this value into the given Serde serializer. <a href="https://docs.rs/serde/1.0.116/serde/ser/trait.Serialize.html#tymethod.serialize">Read more</a></p>
</div></div><h3 id="impl-Strictest" class="impl"><code class="in-band">impl Strictest for dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a></code><a href="#impl-Strictest" class="anchor"></a><a class="srclink" href="../../src/c19/state.rs.html#60" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="associatedtype.Object" class="type"><code>type <a href="#associatedtype.Object" class="type">Object</a> = dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/nightly/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a></code></h4></div></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"><h3 id="impl-State" class="impl"><code class="in-band">impl State for <a class="struct" href="../../c19/state/default/struct.Default.html" title="struct c19::state::default::Default">Default</a></code><a href="#impl-State" class="anchor"></a><a class="srclink" href="../../src/c19/state/default.rs.html#260-359" title="goto source code">[src]</a></h3><div class="impl-items"><h4 id="method.init" class="method"><code>pub fn <a href="#method.init" class="fnname">init</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/sync/struct.Arc.html" title="struct alloc::sync::Arc">Arc</a>&lt;dyn <a class="trait" href="../../c19/state/trait.State.html" title="trait c19::state::State">State</a>&gt;</code><a class="srclink" href="../../src/c19/state/default.rs.html#269-294" title="goto source code">[src]</a></h4><div class="docblock"><p>Initializes the state.</p>
<p>Seeds the state with the specified DataSeeder (if one was specified).</p>
<p>Spawns an async set thread which will perform async commits to the state.</p>
<p>Spawns a new thread to purge expired values and versions at a certain interval and returns a safe state
to be shared with the connection and agent layers.</p>
</div><h4 id="method.version" class="method"><code>pub fn <a href="#method.version" class="fnname">version</a>(&amp;self) -&gt; <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/string/struct.String.html" title="struct alloc::string::String">String</a></code><a class="srclink" href="../../src/c19/state/default.rs.html#297-304" title="goto source code">[src]</a></h4><div class="docblock"><p>Returns the current state version.</p>
</div><h4 id="method.set" class="method"><code>pub fn <a href="#method.set" class="fnname">set</a>(&amp;self, value: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/nightly/std/primitive.unit.html">()</a>, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state/default.rs.html#312-318" title="goto source code">[src]</a></h4><div class="docblock"><p>Sets a new value to the state.</p>
<p>The new value is expected to be in a form of a key/value hashmap.
The value (hashmap) is then filtered to include only values that are new or newer than the current
values in store. This is to resolve conflicts of updating items that were already updated
by another peer. See the module documentation for more information on conflict resolution.</p>
</div><h4 id="method.get" class="method"><code>pub fn <a href="#method.get" class="fnname">get</a>(&amp;self, key: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state/default.rs.html#323-332" title="goto source code">[src]</a></h4><div class="docblock"><p>Returns the value associated with the specified key.</p>
<p><code>key</code> is expected to resolve to a string.</p>
</div><h4 id="method.get_root" class="method"><code>pub fn <a href="#method.get_root" class="fnname">get_root</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state/default.rs.html#335-338" title="goto source code">[src]</a></h4><div class="docblock"><p>Returns the whole state (root).</p>
</div><h4 id="method.diff" class="method"><code>pub fn <a href="#method.diff" class="fnname">diff</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self, <br>&nbsp;&nbsp;&nbsp;&nbsp;other: &amp;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="../../c19/state/trait.StateValue.html" title="trait c19::state::StateValue">StateValue</a>&gt;, <a class="struct" href="https://doc.rust-lang.org/nightly/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="https://doc.rust-lang.org/nightly/std/error/trait.Error.html" title="trait std::error::Error">StdError</a>&gt;&gt;</code><a class="srclink" href="../../src/c19/state/default.rs.html#345-358" title="goto source code">[src]</a></h4><div class="docblock"><p>Returns the difference between the current state and <code>other</code>.</p>
<p>If a key is present in both the current state and <code>other</code>, it will check if 
the timestamps are equal and if not then it'll include either the current value or 
the one from <code>other</code>, based on who's value has the most recent timestamp.</p>
</div></div></div><span class="loading-content">Loading content...</span><script type="text/javascript" src="../../implementors/c19/state/trait.State.js" async></script></section><section id="search" class="content hidden"></section><section class="footer"></section><script>window.rootPath = "../../";window.currentCrate = "c19";</script><script src="../../main.js"></script><script defer src="../../search-index.js"></script></body></html>